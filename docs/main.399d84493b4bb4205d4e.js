(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(a,'__esModule',{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&'object'==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,'default',{enumerable:!0,value:a}),2&c&&'string'!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=1)})([function(){},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function f(a,b,c){return b&&e(a.prototype,b),c&&e(a,c),a}function g(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function h(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function i(a,b,c){return b&&h(a.prototype,b),c&&h(a,c),a}function j(a,b){var c;if('undefined'==typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(c=k(a))||b&&a&&'number'==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function(a){throw a},f:e}}throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}var f,g=!0,h=!1;return{s:function(){c=a[Symbol.iterator]()},n:function(){var a=c.next();return g=a.done,a},e:function(a){h=!0,f=a},f:function(){try{g||null==c['return']||c['return']()}finally{if(h)throw f}}}}function k(a,b){if(a){if('string'==typeof a)return l(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return'Object'===c&&a.constructor&&(c=a.constructor.name),'Map'===c||'Set'===c?Array.from(a):'Arguments'===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?l(a,b):void 0}}function l(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}c.r(b),c.d(b,'todoList',function(){return x});var m=c(0),n=function(){function a(b){d(this,a),this.tarea=b,this.id=new Date().getTime(),this.done=!1,this.created=new Date}return f(a,null,[{key:'fromJson',value:function(b){var c=b.id,d=b.tarea,e=b.done,f=b.created,g=new a(d);return g.id=c,g.done=e,g.created=f,g}}]),a}(),o=function(){function a(){g(this,a),this.loadLocalStorage()}return i(a,[{key:'addTodo',value:function(a){this.todos.push(a),this.saveLocalStorage()}},{key:'removeTodo',value:function(a){var b=this.todos.findIndex(function(b){return b.id===a});this.todos.splice(b,1),this.saveLocalStorage()}},{key:'changeDoneTodo',value:function(a){var b=this.todos.find(function(b){return b.id===a});b.done=!b.done,this.saveLocalStorage()}},{key:'removeCompleted',value:function(){this.todos=this.todos.filter(function(a){return!a.done}),this.saveLocalStorage()}},{key:'saveLocalStorage',value:function(){localStorage.setItem('todos',JSON.stringify(this.todos))}},{key:'loadLocalStorage',value:function(){this.todos=localStorage.getItem('todos')?JSON.parse(localStorage.getItem('todos')):[],0<this.todos.length&&(this.todos=this.todos.map(function(a){return n.fromJson(a)}))}}]),a}(),p=document.querySelector('.todo-list'),q=document.querySelector('.new-todo'),r=document.querySelector('.clear-completed'),s=document.querySelector('.filters'),t=document.querySelectorAll('.filters a'),u=document.querySelector('.todo-count strong'),v=function(a){var b='\n    <li class="'.concat(a.done?'completed':'','" data-id="').concat(a.id,'">\n        <div class="view">\n            <input class="toggle" type="checkbox" ').concat(a.done?'checked':'','>\n            <label>').concat(a.tarea,'</label>\n            <button class="destroy"></button>\n        </div>\n        <input class="edit" value="Create a TodoMVC template">\n    </li>'),c=document.createElement('div');c.innerHTML=b,p.appendChild(c.firstElementChild)};q.addEventListener('keyup',function(a){var b=a.keyCode,c=a.target.value;if(13===b&&0<c.length){var d=new n(c);x.addTodo(d),v(d),q.value='',w()}}),p.addEventListener('click',function(a){var b=a.target.localName,c=a.target.parentElement.parentElement,d=+c.getAttribute('data-id');'input'===b?(x.changeDoneTodo(d),c.classList.toggle('completed'),w()):'button'===b&&(x.removeTodo(d),c.remove(),w())}),r.addEventListener('click',function(){x.removeCompleted(),w();for(var a,b=p.children.length-1;0<=b;b--)a=p.children[b],a.classList.contains('completed')&&a.remove()}),s.addEventListener('click',function(a){var b=a.target.text;if(b){t.forEach(function(a){return a.classList.remove('selected')});var c=a.target;c.classList.add('selected');var d,e=j(p.children);try{for(e.s();!(d=e.n()).done;){var f=d.value;f.classList.remove('hidden');var g=f.classList.contains('completed');switch(b){case'Pendientes':g&&f.classList.add('hidden');break;case'Completados':g||f.classList.add('hidden');break;default:}}}catch(a){e.e(a)}finally{e.f()}}});var w=function(){var a=x.todos.filter(function(a){return!a.done});u.innerHTML=a.length},x=new o;w(),x.todos&&0<x.todos.length&&x.todos.forEach(function(a){return v(a)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlcy5jc3MiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NsYXNzZXMvdG9kby5jbGFzcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY2xhc3Nlcy90b2RvLWxpc3QuY2xhc3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImlkIiwidGFyZWEiLCJkb25lIiwiY3JlYXRlZCIsInRlbXBUb2RvIiwiaW5kZXgiLCJ0b2RvIiwiaXRlbSIsImxvY2FsU3RvcmFnZSIsIkpTT04iLCJUb2RvIiwiJHRvZG9MaXN0IiwiZG9jdW1lbnQiLCIkbmV3SW5wdXQiLCIkY2xlYXJDb21wbGV0ZWQiLCIkZmlsdGVycyIsIiRmaWx0ZXJzQW5jaG9yZSIsIiR0b2RvQ291bnQiLCJjcmVhdGVUb2RvSHRtbCIsImh0bWxUb2RvIiwiZGl2Iiwia2V5Q29kZSIsInZhbHVlIiwidG9kb0xpc3QiLCJ0YXNrQ291bnRlciIsIm5vbWJyZUVsZW1lbnRvIiwiZSIsInRvZG9FbGVtZW50IiwidG9kb0lkIiwiaSIsImVsZW1lbnQiLCJhY3Rpb24iLCJpdGVtQW5jaG9yZSIsInRvZG9JdGVtIiwiY29tcGxldGVkIiwiY291bnQiXSwibWFwcGluZ3MiOiJhQUlBLGNBR0EsUUFDQSxvQkFHQSxZQUNBLEdBREEsQ0FFQSxJQUZBLENBR0EsVUFIQSxFQWFBLE1BTkEsbUNBTUEsQ0FIQSxNQUdBLFVBQ0EsQ0F4QkEsU0FpRkEsTUFyREEsTUFxREEsQ0FsREEsS0FrREEsQ0EvQ0Esb0JBQ0EsUUFEQSxFQUVBLDJCQUEwQyxhQUExQyxDQUEwQyxLQUExQyxFQUVBLENBMkNBLENBeENBLGdCQUNBLDhDQURBLEVBRUEsNENBQXdELGNBQXhELEVBRkEsQ0FJQSxzQ0FBaUQsUUFBakQsRUFDQSxDQW1DQSxDQTVCQSxrQkFFQSxH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QUM1Q1MsbUJBRDRDLENBRTVDQyxHQUY0QyxDQUc1QyxJQUFLLE1BQUlLLEVBQUlsQixrQkFBYixHQUE0Q2tCLEdBQTVDLE9BQ29CbEIsRUFBaEIsUUFBZ0JBLEdBRHBCLENBR1FtQixxQkFBSixXQUFJQSxDQUhSLEVBSVFBLFVBUFpoQixFLENBWUFDLDJCQUFtQyxXQUFPLENBQ3RDLEdBQU1nQixHQUFTTCxTQUFmLEtBRHNDLE1BWXRDVixVQUF3QixrQkFBVVQsb0JBQVYsVUFBVUEsQ0FBbENTLEVBWnNDLENBYXRDLEdBQU1nQixHQUFjTixFQUFwQixPQUNBTSwyQkFkc0MsV0FnQmZyQixFQWhCZSxjQWdCdEMsMkJBQTJDLElBQWhDc0IsR0FBZ0MsUUFDdkNBLDRCQUR1QyxDQUV2QyxHQUFNQyxHQUFZRCxxQkFBbEIsV0FBa0JBLENBQWxCLENBRUEsVUFDSSxvQkFFUUEseUJBRlIsQ0FJSSxNQUNKLHFCQUVRQSx5QkFGUixDQUlJLE1BQ0osUUFYSixDQWNILENBbENxQyxnQ0FBMUNsQixFLElBcUNhUyxhQUFvQixDQUM3QixHQUFNVyxHQUFRLGVBQXNCLGtCQUFVLENBQUM1QixFQUFYLElBQXBDLENBQWMsQ0FBZCxDQUNBVSxZQUF1QmtCLEVBQXZCbEIsTUFGRyxDLENDeEdNTSxFQUFOLEssQ0FFUEMsRyxDQUVJRCxTQUFKLENBQXNCQSxlLEVBQ2xCQSxnQkFBdUIsdUJBQXZCQSxFIiwiZmlsZSI6Im1haW4uMzk5ZDg0NDkzYjRiYjQyMDVkNGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iLCJleHBvcnQgY2xhc3MgVG9kbyB7XHJcbiAgICAvLyB0YXJlYTtcclxuICAgIC8vIGlkO1xyXG4gICAgLy8gZG9uZTtcclxuICAgIC8vIGNyZWF0ZWQ7XHJcblxyXG4gICAgc3RhdGljIGZyb21Kc29uKHsgaWQsIHRhcmVhLCBkb25lLCBjcmVhdGVkIH0pIHtcclxuICAgICAgICBjb25zdCB0ZW1wVG9kbyA9IG5ldyBUb2RvKHRhcmVhKTtcclxuICAgICAgICB0ZW1wVG9kby5pZCA9IGlkO1xyXG4gICAgICAgIHRlbXBUb2RvLmRvbmUgPSBkb25lO1xyXG4gICAgICAgIHRlbXBUb2RvLmNyZWF0ZWQgPSBjcmVhdGVkO1xyXG5cclxuICAgICAgICByZXR1cm4gdGVtcFRvZG87XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IodGFyZWEpIHtcclxuICAgICAgICB0aGlzLnRhcmVhID0gdGFyZWE7XHJcbiAgICAgICAgdGhpcy5pZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlZCA9IG5ldyBEYXRlKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVG9kbyB9IGZyb20gJy4vdG9kby5jbGFzcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVG9kb0xpc3Qge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkTG9jYWxTdG9yYWdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkVG9kbyh0b2RvKSB7XHJcbiAgICAgICAgdGhpcy50b2Rvcy5wdXNoKHRvZG8pO1xyXG4gICAgICAgIHRoaXMuc2F2ZUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVRvZG8oaWQpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMudG9kb3MuZmluZEluZGV4KCh0b2RvKSA9PiB0b2RvLmlkID09PSBpZCk7XHJcbiAgICAgICAgdGhpcy50b2Rvcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZURvbmVUb2RvKGlkKSB7XHJcbiAgICAgICAgY29uc3QgdG9kbyA9IHRoaXMudG9kb3MuZmluZCgoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpO1xyXG4gICAgICAgIHRvZG8uZG9uZSA9ICF0b2RvLmRvbmU7XHJcbiAgICAgICAgdGhpcy5zYXZlTG9jYWxTdG9yYWdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ29tcGxldGVkKCkge1xyXG4gICAgICAgIHRoaXMudG9kb3MgPSB0aGlzLnRvZG9zLmZpbHRlcigoaXRlbSkgPT4gIWl0ZW0uZG9uZSk7XHJcbiAgICAgICAgdGhpcy5zYXZlTG9jYWxTdG9yYWdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZUxvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9kb3MnLCBKU09OLnN0cmluZ2lmeSh0aGlzLnRvZG9zKSk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZExvY2FsU3RvcmFnZSgpIHtcclxuICAgICAgICB0aGlzLnRvZG9zID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RvZG9zJykgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2RvcycpKSA6IFtdO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50b2Rvcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9kb3MgPSB0aGlzLnRvZG9zLm1hcCgoaXRlbSkgPT4gVG9kby5mcm9tSnNvbihpdGVtKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFRvZG8gfSBmcm9tICcuL2NsYXNzZXMnO1xyXG5pbXBvcnQgeyB0b2RvTGlzdCB9IGZyb20gJy4uL2luZGV4JztcclxuXHJcbmNvbnN0ICR0b2RvTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWxpc3QnKTtcclxuY29uc3QgJG5ld0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy10b2RvJyk7XHJcbmNvbnN0ICRjbGVhckNvbXBsZXRlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbGVhci1jb21wbGV0ZWQnKTtcclxuY29uc3QgJGZpbHRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmlsdGVycycpO1xyXG5jb25zdCAkZmlsdGVyc0FuY2hvcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVycyBhJyk7XHJcbmNvbnN0ICR0b2RvQ291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1jb3VudCBzdHJvbmcnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVUb2RvSHRtbCA9ICh0b2RvKSA9PiB7XHJcbiAgICBjb25zdCBodG1sVG9kbyA9IGBcclxuICAgIDxsaSBjbGFzcz1cIiR7dG9kby5kb25lID8gJ2NvbXBsZXRlZCcgOiAnJ31cIiBkYXRhLWlkPVwiJHt0b2RvLmlkfVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2aWV3XCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInRvZ2dsZVwiIHR5cGU9XCJjaGVja2JveFwiICR7dG9kby5kb25lID8gJ2NoZWNrZWQnIDogJyd9PlxyXG4gICAgICAgICAgICA8bGFiZWw+JHt0b2RvLnRhcmVhfTwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkZXN0cm95XCI+PC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGlucHV0IGNsYXNzPVwiZWRpdFwiIHZhbHVlPVwiQ3JlYXRlIGEgVG9kb01WQyB0ZW1wbGF0ZVwiPlxyXG4gICAgPC9saT5gO1xyXG5cclxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgZGl2LmlubmVySFRNTCA9IGh0bWxUb2RvO1xyXG5cclxuICAgICR0b2RvTGlzdC5hcHBlbmRDaGlsZChkaXYuZmlyc3RFbGVtZW50Q2hpbGQpO1xyXG59O1xyXG5cclxuLy8gZXZlbnRvc1xyXG5cclxuJG5ld0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgICAga2V5Q29kZSxcclxuICAgICAgICB0YXJnZXQ6IHsgdmFsdWUgfSxcclxuICAgIH0gPSBldmVudDtcclxuXHJcbiAgICBpZiAoa2V5Q29kZSA9PT0gMTMgJiYgdmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHRvZG8gPSBuZXcgVG9kbyh2YWx1ZSk7XHJcbiAgICAgICAgdG9kb0xpc3QuYWRkVG9kbyh0b2RvKTtcclxuICAgICAgICBjcmVhdGVUb2RvSHRtbCh0b2RvKTtcclxuICAgICAgICAkbmV3SW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICB0YXNrQ291bnRlcigpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbiR0b2RvTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICBjb25zdCBub21icmVFbGVtZW50byA9IGUudGFyZ2V0LmxvY2FsTmFtZTtcclxuICAgIGNvbnN0IHRvZG9FbGVtZW50ID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgY29uc3QgdG9kb0lkID0gTnVtYmVyKHRvZG9FbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpKTtcclxuXHJcbiAgICBpZiAobm9tYnJlRWxlbWVudG8gPT09ICdpbnB1dCcpIHtcclxuICAgICAgICB0b2RvTGlzdC5jaGFuZ2VEb25lVG9kbyh0b2RvSWQpO1xyXG4gICAgICAgIHRvZG9FbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2NvbXBsZXRlZCcpO1xyXG4gICAgICAgIHRhc2tDb3VudGVyKCk7XHJcbiAgICB9IGVsc2UgaWYgKG5vbWJyZUVsZW1lbnRvID09PSAnYnV0dG9uJykge1xyXG4gICAgICAgIHRvZG9MaXN0LnJlbW92ZVRvZG8odG9kb0lkKTtcclxuICAgICAgICB0b2RvRWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICB0YXNrQ291bnRlcigpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbiRjbGVhckNvbXBsZXRlZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHRvZG9MaXN0LnJlbW92ZUNvbXBsZXRlZCgpO1xyXG4gICAgdGFza0NvdW50ZXIoKTtcclxuICAgIGZvciAobGV0IGkgPSAkdG9kb0xpc3QuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gJHRvZG9MaXN0LmNoaWxkcmVuW2ldO1xyXG5cclxuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbXBsZXRlZCcpKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuXHJcbiRmaWx0ZXJzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgIGNvbnN0IGFjdGlvbiA9IGUudGFyZ2V0LnRleHQ7XHJcblxyXG4gICAgaWYgKCFhY3Rpb24pIHJldHVybjtcclxuXHJcbiAgICAvLyBmb3IgKGNvbnN0IGl0ZW1BbmNob3JlIG9mICRmaWx0ZXJzQW5jaG9yZSkge1xyXG4gICAgLy8gICAgIGl0ZW1BbmNob3JlLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XHJcbiAgICAvLyAgICAgaWYgKGFjdGlvbiA9PT0gaXRlbUFuY2hvcmUudGV4dCkge1xyXG4gICAgLy8gICAgICAgICBpdGVtQW5jaG9yZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH1cclxuXHJcbiAgICAkZmlsdGVyc0FuY2hvcmUuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTtcclxuICAgIGNvbnN0IGl0ZW1BbmNob3JlID0gZS50YXJnZXQ7XHJcbiAgICBpdGVtQW5jaG9yZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG5cclxuICAgIGZvciAoY29uc3QgdG9kb0l0ZW0gb2YgJHRvZG9MaXN0LmNoaWxkcmVuKSB7XHJcbiAgICAgICAgdG9kb0l0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgY29uc3QgY29tcGxldGVkID0gdG9kb0l0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZWQnKTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcclxuICAgICAgICAgICAgY2FzZSAnUGVuZGllbnRlcyc6XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9kb0l0ZW0uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnQ29tcGxldGFkb3MnOlxyXG4gICAgICAgICAgICAgICAgaWYgKCFjb21wbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b2RvSXRlbS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCB0YXNrQ291bnRlciA9ICgpID0+IHtcclxuICAgIGNvbnN0IGNvdW50ID0gdG9kb0xpc3QudG9kb3MuZmlsdGVyKChpdGVtKSA9PiAhaXRlbS5kb25lKTtcclxuICAgICR0b2RvQ291bnQuaW5uZXJIVE1MID0gY291bnQubGVuZ3RoO1xyXG59O1xyXG4iLCIvLyBpbXBvcnQgeyBzYWx1ZGFyIH0gZnJvbSAnLi9qcy9zYWx1ZGFyJztcclxuaW1wb3J0ICcuL3N0eWxlcy5jc3MnO1xyXG5pbXBvcnQgeyBUb2RvTGlzdCB9IGZyb20gJy4vanMvY2xhc3Nlcyc7XHJcbmltcG9ydCB7IGNyZWF0ZVRvZG9IdG1sLCB0YXNrQ291bnRlciB9IGZyb20gJy4vanMvY29tcG9uZW50cyc7XHJcblxyXG5leHBvcnQgY29uc3QgdG9kb0xpc3QgPSBuZXcgVG9kb0xpc3QoKTtcclxuXHJcbnRhc2tDb3VudGVyKCk7XHJcblxyXG5pZiAodG9kb0xpc3QudG9kb3MgJiYgdG9kb0xpc3QudG9kb3MubGVuZ3RoID4gMCkge1xyXG4gICAgdG9kb0xpc3QudG9kb3MuZm9yRWFjaCgodG9kbykgPT4gY3JlYXRlVG9kb0h0bWwodG9kbykpO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=